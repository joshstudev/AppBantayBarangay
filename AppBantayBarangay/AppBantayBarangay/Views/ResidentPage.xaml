<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AppBantayBarangay.Views.ResidentPage"
             NavigationPage.HasNavigationBar="False"
             BackgroundColor="#F5F5F5">
    <ContentPage.Resources>
        <ResourceDictionary>
            <Color x:Key="PrimaryBlue">#007AFF</Color>
            <Color x:Key="AccentYellow">#FFD700</Color>
            <Color x:Key="AccentRed">#FF3B30</Color>
            <Color x:Key="AccentGreen">#34C759</Color>
            <Color x:Key="AccentOrange">#FF9500</Color>
            <Color x:Key="LightGray">#F5F5F5</Color>
            <Color x:Key="MediumGray">#E0E0E0</Color>
            <Color x:Key="DarkGray">#666666</Color>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Header (Matching Official Dashboard Theme) -->
        <Grid Grid.Row="0" BackgroundColor="{StaticResource PrimaryBlue}" Padding="20,10" HeightRequest="70">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            
            <Frame Grid.Column="0" 
                   HeightRequest="50" 
                   WidthRequest="50" 
                   CornerRadius="25" 
                   Padding="3" 
                   BackgroundColor="Transparent" 
                   BorderColor="Transparent"
                   VerticalOptions="Center" 
                   HorizontalOptions="Start"
                   HasShadow="False">
                <Image Source="logo" 
                       Aspect="AspectFit"
                       HorizontalOptions="Center" 
                       VerticalOptions="Center"/>
            </Frame>
            
            <StackLayout Grid.Column="1" 
                        VerticalOptions="Center" 
                        HorizontalOptions="Center">
                <Label Text="Resident Dashboard" 
                       TextColor="White" 
                       FontSize="22" 
                       FontAttributes="Bold"
                       HorizontalTextAlignment="Center"/>
                <Label x:Name="WelcomeLabel"
                       Text="Welcome, Resident!" 
                       TextColor="White" 
                       FontSize="14" 
                       HorizontalTextAlignment="Center"
                       Margin="0,-7,0,0"/>
            </StackLayout>

            <Button Grid.Column="2"
                    x:Name="MyReportsButton"
                    Text="📋"
                    BackgroundColor="Transparent"
                    TextColor="White"
                    FontSize="20"
                    HeightRequest="40"
                    WidthRequest="40"
                    CornerRadius="20"
                    Padding="0"
                    VerticalOptions="Center"
                    Margin="0,0,10,0"
                    Clicked="MyReportsButton_Clicked"/>

            <Button Grid.Column="3"
                    x:Name="LogoutButton"
                    Text="⎋"
                    BackgroundColor="Transparent"
                    TextColor="White"
                    FontSize="20"
                    HeightRequest="40"
                    WidthRequest="40"
                    CornerRadius="20"
                    Padding="0"
                    VerticalOptions="Center"
                    Clicked="LogoutButton_Clicked"/>
        </Grid>

        <!-- Main Content -->
        <ScrollView Grid.Row="1">
            <StackLayout Padding="15" Spacing="15">
                
                <Label Text="Report an Issue"
                       FontSize="20"
                       FontAttributes="Bold"
                       TextColor="{StaticResource PrimaryBlue}"
                       HorizontalOptions="Center"
                       Margin="0,10,0,10"/>

                <!-- Photo Upload Section -->
                <Label Text="Photo Evidence" 
                       FontSize="16" 
                       FontAttributes="Bold"
                       TextColor="{StaticResource PrimaryBlue}"/>

                <StackLayout Orientation="Horizontal" 
                            Spacing="10" 
                            HorizontalOptions="FillAndExpand">
                    <Button x:Name="UploadPhotoButton"
                            Text="📁 Upload Photo"
                            BackgroundColor="{StaticResource PrimaryBlue}"
                            TextColor="White"
                            CornerRadius="10"
                            Padding="10"
                            Clicked="UploadPhotoButton_Clicked"
                            HorizontalOptions="FillAndExpand"/>
                    <Button x:Name="TakePhotoButton"
                            Text="📷 Take Photo"
                            BackgroundColor="{StaticResource PrimaryBlue}"
                            TextColor="White"
                            CornerRadius="10"
                            Padding="10"
                            Clicked="TakePhotoButton_Clicked"
                            HorizontalOptions="FillAndExpand"/>
                </StackLayout>

                <Frame BorderColor="{StaticResource MediumGray}" 
                       CornerRadius="15" 
                       Padding="5" 
                       HasShadow="False"
                       BackgroundColor="White">
                    <Image x:Name="UploadedImage"
                           HeightRequest="200"
                           Aspect="AspectFill"
                           BackgroundColor="{StaticResource LightGray}"/>
                </Frame>

                <!-- Description Section -->
                <Label Text="Description"
                       FontSize="16"
                       FontAttributes="Bold"
                       TextColor="{StaticResource PrimaryBlue}"
                       Margin="0,10,0,5"/>

                <Frame BorderColor="{StaticResource PrimaryBlue}" 
                       CornerRadius="10" 
                       Padding="5"
                       HasShadow="False"
                       BackgroundColor="White">
                    <Editor x:Name="DescriptionEditor"
                            Placeholder="Describe the issue in detail..."
                            PlaceholderColor="{StaticResource MediumGray}"
                            TextColor="#333333"
                            HeightRequest="120"
                            AutoSize="TextChanges"/>
                </Frame>

                <!-- Location Section -->
                <Label Text="Location"
                       FontSize="16"
                       FontAttributes="Bold"
                       TextColor="{StaticResource PrimaryBlue}"
                       Margin="0,10,0,5"/>

                <Button x:Name="PinLocationButton"
                        Text="📍 Get Current Location"
                        BackgroundColor="{StaticResource AccentGreen}"
                        TextColor="White"
                        CornerRadius="10"
                        Padding="12"
                        Clicked="PinLocationButton_Clicked"/>

                <!-- Location Coordinates Frame -->
                <Frame x:Name="LocationFrame"
                       IsVisible="False"
                       BackgroundColor="White"
                       BorderColor="{StaticResource PrimaryBlue}"
                       CornerRadius="15"
                       Padding="15"
                       HasShadow="True"
                       Margin="0,10,0,0">
                    <StackLayout Spacing="10">
                        <Label Text="📍 Location Captured" 
                               FontSize="16" 
                               FontAttributes="Bold"
                               TextColor="{StaticResource AccentGreen}"
                               HorizontalOptions="Center"/>
                        
                        <BoxView HeightRequest="1" 
                                BackgroundColor="{StaticResource MediumGray}"/>
                        
                        <Grid ColumnSpacing="10" RowSpacing="8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!-- Latitude -->
                            <Label Grid.Row="0" Grid.Column="0"
                                   Text="Latitude:"
                                   FontSize="14"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource DarkGray}"/>
                            <Label Grid.Row="0" Grid.Column="1"
                                   x:Name="LatitudeLabel"
                                   Text="--"
                                   FontSize="14"
                                   TextColor="{StaticResource DarkGray}"/>

                            <!-- Longitude -->
                            <Label Grid.Row="1" Grid.Column="0"
                                   Text="Longitude:"
                                   FontSize="14"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource DarkGray}"/>
                            <Label Grid.Row="1" Grid.Column="1"
                                   x:Name="LongitudeLabel"
                                   Text="--"
                                   FontSize="14"
                                   TextColor="{StaticResource DarkGray}"/>

                            <!-- Address -->
                            <Label Grid.Row="2" Grid.Column="0"
                                   Text="Address:"
                                   FontSize="14"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource DarkGray}"
                                   VerticalOptions="Start"/>
                            <Label Grid.Row="2" Grid.Column="1"
                                   x:Name="AddressLabel"
                                   Text="--"
                                   FontSize="14"
                                   TextColor="{StaticResource DarkGray}"
                                   LineBreakMode="WordWrap"/>
                        </Grid>

                        <Button x:Name="UpdateLocationButton"
                                Text="🔄 Update Location"
                                BackgroundColor="{StaticResource AccentOrange}"
                                TextColor="White"
                                CornerRadius="8"
                                Padding="8"
                                FontSize="12"
                                Clicked="PinLocationButton_Clicked"
                                HorizontalOptions="Center"/>
                    </StackLayout>
                </Frame>

                <!-- Submit Button -->
                <Button x:Name="SubmitButton"
                        Text="✓ Submit Report"
                        BackgroundColor="{StaticResource AccentRed}"
                        TextColor="White"
                        CornerRadius="10"
                        Padding="15"
                        FontSize="18"
                        FontAttributes="Bold"
                        Clicked="SubmitButton_Clicked"
                        Margin="0,20,0,20"/>

                <!-- Info Note -->
                <Frame BackgroundColor="#E3F2FD"
                       BorderColor="{StaticResource PrimaryBlue}"
                       CornerRadius="10"
                       Padding="15"
                       HasShadow="False">
                    <StackLayout Spacing="5">
                        <Label Text="ℹ️ Important Notes" 
                               FontSize="14" 
                               FontAttributes="Bold"
                               TextColor="{StaticResource PrimaryBlue}"/>
                        <Label Text="• Make sure to upload a clear photo of the issue"
                               FontSize="12"
                               TextColor="{StaticResource DarkGray}"/>
                        <Label Text="• Provide detailed description for faster resolution"
                               FontSize="12"
                               TextColor="{StaticResource DarkGray}"/>
                        <Label Text="• Location helps officials locate the problem"
                               FontSize="12"
                               TextColor="{StaticResource DarkGray}"/>
                    </StackLayout>
                </Frame>
            </StackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
